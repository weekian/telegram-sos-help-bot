function populateChatMessage(a,e,t,i){i?$(".chat-history ul").append('<li class="clearfix"><div class="message-data align-right"><span class="message-data-time">'+a+', Today</span> &nbsp; &nbsp;<span class="message-data-name">'+e+'&nbsp;</span><i class="fa fa-circle me"></i></div><div class="message other-message float-right">'+t+"</div></li>"):$(".chat-history ul").append('<li><div class="message-data"><span class="message-data-name"><i class="fa fa-circle online"></i> '+e+'</span><span class="message-data-time">'+a+'</span></div><div class="message my-message">'+t+"</div></li>")}function scrollToBottom(){$(".chat-history").animate({scrollTop:$(".chat-history")[0].scrollHeight-$(".chat-history")[0].clientHeight},500)}function addNewChat(a,e,t,i){var s=moment(t,"D/MM/YYYY hh:mm A").fromNow(),n=a?"male":"female";$(".new-chats ul.list").append('<li class="clearfix" id="'+i+'"><img src="static/images/'+n+'.png" height="45" width="45" alt="avatar" /><div class="about"><div class="name">'+e+'</div><div class="traits"><i class="fa fa-thumb-tack new-joiner"></i> '+s+"</div></div></li>")}function addToOwnChat(a,e){var t=a?"male":"female";$(".owned-chats ul.list").prepend('<li class="clearfix"><img src="static/images/'+t+'.png" height="45" width="45" alt="avatar" /><div class="about"><div class="name">'+e+'</div><div class="status"><i class="fa fa-circle online"></i> Just joined</div></div></li>')}var socket=void 0;$(document).ready(function(){$(".chat-history").length&&scrollToBottom(),$('form[class="form-signin"]').submit(function(a){$('p[id="error-msg"]').text(""),a.preventDefault(),$.ajax({url:"/api",type:"POST",data:{email:$('input[id="inputEmail"]').val(),password:$('input[id="inputPassword"]').val()},accepts:{text:"application/json; charset=utf-8"},success:function(a){location.href=a.redirect},error:function(a){$('p[id="error-msg"]').text(a.responseJSON.message||"something went wrong")}})}),$('button[id="button"]').click(function(){$.ajax({url:"/api/test",type:"POST",data:{email:"email",password:"password"},accepts:{text:"application/json; charset=utf-8"},success:function(a){location.href=a.redirect},error:function(a){$('p[id="error-msg"]').text(a.responseJSON.message||"something went wrong")}})}),$("#notes-button").click(function(){var a=$("#notes-to-send").val();if(""!==a){var e=moment().format("D/MM/YYYY HH:mm");$(".right-notes").append("<p><span>["+e+"]</span><i>"+Cookies.get("username")+":</i> "+a+"</P>"),$("#notes-to-send").val("")}}),$("#notes-to-send").keyup(function(a){13==a.keyCode&&$("#notes-button").trigger("click")}),$("#message-button").click(function(){var a=$("#message-to-send").val();""!==a&&(populateChatMessage(moment().format("h:mm A"),Cookies.get("username"),a,!0),socket.emit("sendMsg",{id:$("div.sidenav.right div.right-details div.form input#id").val(),msg:a}),$("#message-to-send").val(""),scrollToBottom())}),$("#message-to-send").keyup(function(a){13==a.keyCode&&$("#message-button").trigger("click")}),$("#logout").click(function(){location.href="/"}),window.location.href.endsWith("/home.html")&&((socket=io.connect("http://localhost:8080")).on("newChat",function(a){console.log(JSON.stringify(a,null,4)),localStorage.setItem(a.id,JSON.stringify(a)),addNewChat("Male"===a.gender,a.name,a.timeNow,a.id),$('.new-chats li[id="'+a.id+'"]').click(function(){var a=$(this).attr("id"),e=JSON.parse(localStorage.getItem(a));$("#new-chat-details input#name").val(e.name),$("#new-chat-details input#age").val(e.age),$("#new-chat-details input#gender").val(e.gender),$("#new-chat-details input#reason").val(e.reason),$("#new-chat-details input#id").val(e.id),$("#new-chat-details").modal("show")})}),socket.on("newMsg",function(a){console.log(JSON.stringify(a,null,4)),populateChatMessage(moment(a.timeNow,"D/MM/YYYY hh:mm A").format("h:mm A"),a.name,a.msg,!1)})),$("#pick-up-new-chat").click(function(){var a=$("#new-chat-details input#id").val();$('.new-chats li[id="'+a+'"]').remove(),$("#new-chat-details").modal("hide");var e=JSON.parse(localStorage.getItem(a));addToOwnChat("Male"===e.gender,e.name),$("div.sidenav.right .header-message div#name").text("Chat with "+e.name),$("div.sidenav.right div.right-details div.form input#age").val(e.age.toString()+" years old"),$("div.sidenav.right div.right-details div.form input#gender").val(e.gender),$("div.sidenav.right div.right-details div.form input#reason").val(e.reason),$("div.sidenav.right div.right-details div.form input#id").val(e.id),$("div.blank#default").hide(),$("div#details").show()})});